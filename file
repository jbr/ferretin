  Item: anyhow
Kind: Module
Visibility: Public
Defined at: anyhow
In crate: anyhow (1.0.100)

github crates-io docs-rs

This library provides anyhow::Error, a trait object based error type for easy idiomatic error handling in Rust applications.

Details
================================================================================
```
#
#
#
#
#
use anyhow::Result;

fn get_cluster_info() -> Result<ClusterMap> {
    let config = std::fs::read_to_string("cluster.json")?;
    let map: ClusterMap = serde_json::from_str(&config)?;
    Ok(map)
}
#

```

```
#
#
use anyhow::{Context, Result};

fn main() -> Result<()> {
    # return Ok(());
    #
    # const _: &str = stringify! {
    ...
    # };
    #
    # let it = It;
    # let path = "./path/to/instrs.json";
    #
    it.detach().context("Failed to detach the important thing")?;

    let content = std::fs::read(path)
        .with_context(|| format!("Failed to read instrs from {}", path))?;
    #
    # const _: &str = stringify! {
    ...
    # };
    #
    # Ok(())
}

```

```
Error: Failed to read instrs from ./path/to/instrs.json

Caused by:
    No such file or directory (os error 2)

```

```
#
#
#
#
#
#
// If the error was caused by redaction, then return a
// tombstone instead of the content.
match root_cause.downcast_ref::<DataStoreError>() {
    Some(DataStoreError::Censored(_)) => Ok(Poll::Ready(REDACTED_CONTENT)),
    None => Err(error),
}

```

  • If you want panics and errors to both have backtraces, set RUST_BACKTRACE=1;
  • If you want only errors to have backtraces, set RUST_LIB_BACKTRACE=1;
  • If you want only panics to have backtraces, set RUST_BACKTRACE=1 and RUST_LIB_BACKTRACE=0.
```
use thiserror::Error;

#[derive(Error, Debug)]
pub enum FormatError {
    #[error("Invalid header (expected {expected:?}, got {found:?})")]
    InvalidHeader {
        expected: String,
        found: String,
    },
    #[error("Missing attribute: {0}")]
    MissingAttribute(String),
}

```

```
#
return Err(anyhow!("Missing attribute: {}", missing));

```

```
#
bail!("Missing attribute: {}", missing);

```

No-std support
================================================================================
In no_std mode, almost all of the same API is available and works the same way. To depend on Anyhow in no_std mode, disable our default enabled "std" feature in Cargo.toml. A global allocator is required.

```
[dependencies]
anyhow = { version = "1.0", default-features = false }

```

With versions of Rust older than 1.81, no_std mode may require an additional .map_err(Error::msg) when working with a non-Anyhow error type inside a function that returns Anyhow's error type, as the trait that ?-based error conversions are defined by is only available in std in those old versions.


Structs
  • Chain
Iterator of a chain of source errors. [...]

  • Error
The Error type, a wrapper around a dynamic error type. [...]

Traits
  • Context
Provides the context method for Result. [...]

Type Aliases
  • Result
Result<T, Error> [...]

Functions
  • Ok
Equivalent to Ok::<_, anyhow::Error>(value). [...]

Macros
  • anyhow
Construct an ad-hoc error from a string or existing non-anyhow error value. [...]

  • bail
Return early with an error. [...]

  • ensure
Return early with an error if a condition is not satisfied. [...]

  • format_err
Construct an ad-hoc error from a string or existing non-anyhow error value. [...]

